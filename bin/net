#!/bin/sh
#
# https://www.romanzolotarev.com/bin/net
# Copyright 2017 Roman Zolotarev <hi@romanzolotarev.com>
#

wifi='iwm0'
eth='re0'

case "$1" in

  scan)
    ifconfig $wifi scan
    ;;

  wifi)
    ifconfig $eth -inet down
    if [ -n "$2" ] && [ -n "$3" ]; then
      ifconfig $wifi nwid "$2" wpa wpakey "$3" wpaprotos wpa1,wpa2
    fi
    route -n flush
    ifconfig $wifi up
    dhclient $wifi
    ;;

  eth)
    ifconfig $wifi -inet down
    route -n flush
    ifconfig $eth up
    dhclient $eth
  ;;

  *)
    echo 'usage: net scan'
    echo '         | wifi'
    echo '         | wifi <SSID> <password>'
    echo '         | eth'
  ;;

esac
