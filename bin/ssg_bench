#!/bin/sh

apm -H

# echo "ssg1 (clean)"
# time (for i in $(jot 20); do
# rm -rf /var/www/htdocs/www/*
# rm -rf /var/www/htdocs/www/.*
# (cd ~/src/www && ROOT="https://www" DOCS=/var/www/htdocs/www ssg1 build >/dev/null)
# printf '.'
# done)

echo "ssg2 (clean)"
time (for i in $(jot 20); do
rm -rf /var/www/htdocs/www/*
rm -rf /var/www/htdocs/www/.*
ssg2 ~/src/www /var/www/htdocs/www/ 'Roman Zolotarev' 'http://www' >/dev/null 2>&1
printf '.'
done)

echo "ssg3 (clean)"
time (for i in $(jot 20); do
rm -rf /var/www/htdocs/www/*
rm -rf /var/www/htdocs/www/.*
ssg2 ~/src/www /var/www/htdocs/www/ 'Roman Zolotarev' 'http://www' >/dev/null 2>&1
printf '.'
done)

echo "ssg2 (clean)"
time (for i in $(jot 20); do
rm -rf /var/www/htdocs/www/*
rm -rf /var/www/htdocs/www/.*
ssg2 ~/src/www /var/www/htdocs/www/ 'Roman Zolotarev' 'http://www' >/dev/null 2>&1
printf '.'
done)

echo "ssg3 (clean)"
time (for i in $(jot 20); do
rm -rf /var/www/htdocs/www/*
rm -rf /var/www/htdocs/www/.*
ssg2 ~/src/www /var/www/htdocs/www/ 'Roman Zolotarev' 'http://www' >/dev/null 2>&1
printf '.'
done)

# echo "ssg1"
# time (for i in $(jot 20); do
# (cd ~/src/www && ROOT="https://www" DOCS=/var/www/htdocs/www ssg1 build >/dev/null)
# printf '.'
# done)

echo "ssg2 (incremental)"
time (for i in $(jot 20); do
cat ~/src/www/ssg.md > ~/src/www/ssg_bench_test
ssg2 ~/src/www /var/www/htdocs/www/ 'Roman Zolotarev' 'http:/www' >/dev/null 2>&1
rm ~/src/www/ssg_bench_test
printf '.'
done)

echo "ssg3 (incremental)"
time (for i in $(jot 20); do
cat ~/src/www/ssg.md > ~/src/www/ssg_bench_test
ssg3 ~/src/www /var/www/htdocs/www/ 'Roman Zolotarev' 'http:/www' >/dev/null 2>&1
rm ~/src/www/ssg_bench_test
printf '.'
done)

echo "ssg2 (incremental)"
time (for i in $(jot 20); do
cat ~/src/www/ssg.md > ~/src/www/ssg_bench_test
ssg2 ~/src/www /var/www/htdocs/www/ 'Roman Zolotarev' 'http:/www' >/dev/null 2>&1
rm ~/src/www/ssg_bench_test
printf '.'
done)

echo "ssg3 (incremental)"
time (for i in $(jot 20); do
cat ~/src/www/ssg.md > ~/src/www/ssg_bench_test
ssg3 ~/src/www /var/www/htdocs/www/ 'Roman Zolotarev' 'http:/www' >/dev/null 2>&1
rm ~/src/www/ssg_bench_test
printf '.'
done)

apm -A
