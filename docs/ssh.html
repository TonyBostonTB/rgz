<!DOCTYPE html><html lang="en">
<head><title>SSH keys - Roman Zolotarev</title><meta charset="utf-8"><meta name="referrer" content="no-referrer"><link rel="stylesheet" href="/styles.css"><link rel="manifest" href="/manifest.webmanifest"><meta name="theme-color" content="#ffffff"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
</head>
<body><script>!function(t){ t.addEventListener('DOMContentLoaded', function () { var l = t.querySelector('#light-off'); if (l === null) { console.log('Lights-out...'); } else { l.checked = t.cookie.match(/lightOff=true/) !== null; l.addEventListener('change', function () { t.cookie = 'lightOff=' + JSON.stringify(l.checked) + ';path=/'; }); } })}(document);</script><input class="light-off" type="checkbox" id="light-off">
<div class="page">
<div class="header"><div class="header__home"><a href="/">Home</a> - <a href="https://twitter.com/romanzolotarev">Twitter</a></div><div class="header__light-off"><label for="light-off" class="light-off-button"></label></div></div>
<div class="article"><h1 id="SSH%20keys">SSH keys</h1>

<p>If you are using short DSA or RSA keys, it&#8217;s time to generate new ones. It
only takes few minutes.</p>

<p>Elliptic Curve Cryptography was implemented in OpenSSH in 2011. It is safe
to assume that ECC is supported by major operating systems today. Consider
upgrading your SSH keys to ECC: the generated keys are smaller, the
algorithm is faster, and the analysis hasn&#8217;t shown any weaknesses, unlike
traditional RSA or DSA.</p>

<h2 id="Recipe">Recipe</h2>

<p>Run this command to generate your new SSH key pair.</p>

<pre><code>$ ssh-keygen \
  -t ed25519 \
  -o \
  -a 100 \
  -f ~/.ssh/key \
  -C &#39;key&#39;
</code></pre>

<p>Then enter your passphrase twice. Use a strong passphrase. To protect your
private key, use a strong passphrase. <a href="/diceware/">A few random common words should
work</a>.</p>

<p>Your public key will be placed into <code>~/.ssh/key.pub</code>.</p>

<p>Done!</p>

<p>Let me clarify those options. For better security, we used Ed25519 keys
with the <code>-t ed25519</code> option. To increase resistance to brute-force
password checking we used the new OpenSSH format (<code>-o</code>) and a hundred
rounds of the key derivation function (<code>-a 100</code>). We specified a path to
the new file with <code>-f ~/.ssh/key</code> and added a comment to your public key
with <code>-C &#39;key&#39;</code>.</p>

<hr/>

<p>There are some simple guidelines to ensure your keys are as secure as
possible.</p>

<h2 id="Fallback">Fallback</h2>

<p>If Ed25519 does not work, you can use long RSA keys as a fallback.</p>

<pre><code>$ ssh-keygen -t rsa -b 4096 -o -a 100 -f ~/.ssh/key -C &#39;key&#39;
</code></pre>

<h2 id="Do%20not%20share%20private%20keys">Do not share private keys</h2>

<p>Don&#8217;t copy or share your private key. Generate a new key pair for every
user and every device. You can use the same key pair for multiple
destinations, though. Add this function to your <code>~/.bashrc</code>:</p>

<pre><code>generate_ssh_key() {
  local id
  id=$(date +%s)
  ssh-keygen -t ed25519 -o -a 100 -f ~/.ssh/&quot;$id&quot; -C &quot;$id&quot;
}
</code></pre>

<p>Then the next time you need a new key, run <code>generate_ssh_key</code>.</p>

<h2 id="Use%20SSH%20configuration">Use SSH configuration</h2>

<p>Add all your frequently used hosts to <code>~/.ssh/config</code>, like this:</p>

<pre><code>Host rz
  User webmaster
  Hostname romanzolotarev.com
  IdentityFile /home/romanzolotarev/.ssh/key
</code></pre>

<p>After adding this to your SSH configuration you can run <code>ssh rz</code> instead
of <code>ssh -i ~/.ssh/key webmaster@romanzolotarev.com</code>. Neat.</p>

<p>It also helps you to manage your keys; it&#8217;s a good idea to revoke your
keys and generate new ones from time to time.</p></div>
<div class="footer">&copy; <a href="/">Roman Zolotarev</a></div>
</div></body></html>
