<!DOCTYPE html><html lang="en">
<head><title>How to generate and manage SSH keys - Roman Zolotarev</title><meta charset="utf-8"><meta name="referrer" content="no-referrer"><link rel="stylesheet" href="/styles.css"><link rel="manifest" href="/manifest.webmanifest"><meta name="theme-color" content="#ffffff"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
</head>
<body><script>!function(t){ t.addEventListener('DOMContentLoaded', function () { var l = t.querySelector('#light-off'); if (l === null) { console.log('Lights-out...'); } else { l.checked = t.cookie.match(/lightOff=true/) !== null; l.addEventListener('change', function () { t.cookie = 'lightOff=' + JSON.stringify(l.checked) + ';path=/'; }); } })}(document);</script><input class="light-off" type="checkbox" id="light-off">
<div class="page">
<div class="header"><div class="header__home"><a href="/">Home</a> - <a href="https://twitter.com/romanzolotarev">Twitter</a></div><div class="header__light-off"><label for="light-off" class="light-off-button"></label></div></div>
<div class="article"><h1 id="How%20to%20generate%20and%20manage%20SSH%20keys">How to generate and manage SSH keys</h1>

<p>If you are using short DSA or RSA keys, it&#8217;s time to generate new ones. It
only takes few minutes.</p>

<p>Elliptic Curve Cryptography was implemented in OpenSSH in 2011. It is safe
to assume that ECC is supported by major operating systems today. Consider
upgrading your SSH keys to ECC: the generated keys are smaller, the
algorithm is faster, and the analysis hasn&#8217;t shown any weaknesses, unlike
traditional RSA or DSA.</p>

<p>Run this command to generate your new SSH key pair.</p>

<pre><code>$ ssh-keygen -t ed25519 -a 100
Enter file in which to save the key
(/home/romanzolotarev/.ssh/id_ed25519):
Generating public/private ed25519 key pair.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in ~/.ssh/id_ed25519.
Your public key has been saved in ~/.ssh/id_ed25519.pub.
The key fingerprint is:
SHA256:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx comment
The key&#39;s randomart image is:
+--[ED25519 256]--+
|       .o=@*=    |
|        oX = .=  |
|        * o +    |
|       = o =     |
|        S o +    |
|       * + o     |
|      = X.o.=    |
|       O =+o     |
|      . E++++    |
+----[SHA256]-----+
$
</code></pre>

<p>Done!</p>

<p>Let me clarify those options. For better security, we used Ed25519 keys
with the <code>-t ed25519</code> option and to increase resistance to brute-force
password checking we used a hundred rounds of the key derivation function
(<code>-a 100</code>).</p>

<p>P.S. To protect your private key, use a strong passphrase. <a href="/diceware/">A few random common
words should work</a>.</p>

<h2 id="RSA%20fallback">RSA fallback</h2>

<p>If Ed25519 isn&#8217;t yet supported by some of your servers, you can use long
RSA keys as a fallback.</p>

<pre><code>$ ssh-keygen -t rsa -b 4096 -o -a 100
Enter file in which to save the key
(/home/romanzolotarev/.ssh/id_rsa):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in ~/.ssh/id_rsa.
Your public key has been saved in ~/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx comment
The key&#39;s randomart image is:
+---[RSA 2048]----+
|  .ooo ...ooo    |
|  ..o.+  .o+  E  |
|.o.o.o = . o     |
|.Boo= + +        |
|+ Bo . =S        |
| o . ...+. o     |
|    . o  ++      |
|     o o .o      |
|      + ..*      |
+----[SHA256]-----+
$
</code></pre>

<p>P.S. Option <code>-o</code> enables the new OpenSSH format to increase resistance to
brute-force password checking.</p>

<h2 id="Do%20not%20share%20private%20keys">Do not share private keys</h2>

<p>Don&#8217;t copy or share your private key. Generate a new key pair for every
user and every device. You can use the same key pair for multiple
destinations, though.</p>

<h2 id="Use%20SSH%20configuration">Use SSH configuration</h2>

<p>Add all your frequently used hosts to <code>~/.ssh/config</code>, like this:</p>

<pre><code>Host www
  User webmaster
  Hostname www.romanzolotarev.com
  IdentityFile /home/romanzolotarev/.ssh/id_ed25519
</code></pre>

<p>After adding this to your SSH configuration you can run <code>ssh www</code> instead
of <code>ssh -i ~/.ssh/id_ed25519 webmaster@www.romanzolotarev.com</code>. Neat.</p>

<p>It also helps you to manage your keys; it&#8217;s a good practice to revoke your
keys and generate new ones from time to time.</p></div>
<div class="footer">&copy; <a href="/">Roman Zolotarev</a></div>
</div></body></html>
