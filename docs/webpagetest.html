<!DOCTYPE html><html lang="en">
<head><title>Automate website testing with WebPagetest - Roman Zolotarev</title><meta charset="utf-8"><meta name="referrer" content="no-referrer"><link rel="stylesheet" href="/styles.css"><link rel="manifest" href="/manifest.webmanifest"><meta name="theme-color" content="#ffffff"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
</head>
<body><script>!function(t){ t.addEventListener('DOMContentLoaded', function () { var l = t.querySelector('#light-off'); if (l === null) { console.log('Lights-out...'); } else { l.checked = t.cookie.match(/lightOff=true/) !== null; l.addEventListener('change', function () { t.cookie = 'lightOff=' + JSON.stringify(l.checked) + ';path=/'; }); } })}(document);</script><input class="light-off" type="checkbox" id="light-off">
<div class="page">
<div class="header"><div class="header__home"><a href="/">Home</a> - <a href="https://twitter.com/romanzolotarev">Twitter</a></div><div class="header__light-off"><label for="light-off" class="light-off-button"></label></div></div>
<div class="article"><h1 id="Automate%20website%20testing%20with%20WebPagetest">Automate website testing with WebPagetest</h1>

<p>Install <a href="https://github.com/marcelduran/webpagetest-api">webpagetest-api</a>.</p>

<pre><code>$ npm install webpagetest -g
</code></pre>

<p>Save your specs to <a href="/webpagetestspecs.json">webpagetestspecs.json</a>.</p>

<p><a href="https://www.webpagetest.org/getkey.php">Request your API key</a> at
WebPagetest.org. Wait for the email with your key. The API key is limited
to 200 page loads per day.</p>

<p>Export your API key as <code>WPT_API_KEY</code> and target URL as <code>URL</code>. Run your
test.</p>

<pre><code>$ export WPT_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
$ export URL=https://www.romanzolotarev.com/fast/
$ webpagetest test $URL --first --poll \
  --specs webpagetestspecs.json --key $WPT_API_KEY

WebPageTest
  median.firstView.requests: 6 should be less than 10
  median.firstView.render: 605 should be less than 1000
  median.firstView.loadTime: 527 should be less than 1000
  median.firstView.score_gzip: 100 should be greater than 90


4 passing (6ms)
</code></pre>

<p>Now you can add this test to your continuous deployment process. That&#8217;s
it.</p>

<h2 id="See%20also">See also</h2>

<p><a href="https://github.com/marcelduran/webpagetest-api/wiki/Test-Specs">Test specs for WebPageTest API</a></p></div>
<div class="footer">&copy; <a href="/">Roman Zolotarev</a></div>
</div></body></html>
